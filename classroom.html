<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vào Lớp Học</title>
	<link rel="stylesheet" href="./public/plugins/fontawesome/css/all.min.css">
	<link rel="stylesheet" href="./public/plugins/sweetalert2/sweetalert2.min.css">
	<link rel="stylesheet" href="./public/css/adminlte.min.css">
	<link rel="stylesheet" href="./public/css/mystyle.css">
</head>

<body class="hold-transition sidebar-mini layout-navbar-fixed layout-fixed">

	<div class="wrapper">

		<nav class="main-header navbar navbar-expand border-bottom-0 text-sm navbar-light" id="header">
			<ul class="navbar-nav">
				<li class="nav-item">
					<a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
				</li>
				<li class="nav-item d-none d-sm-inline-block">
					<a href="./" class="nav-link">Khu Vườn</a>
				</li>
			</ul>
			<ul class="navbar-nav ml-auto">
				<li class="nav-item">
					<span class="nav-link" id="my-clock" onclick="myClock()"><i class="far fa-clock"></i></span>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="./"><i class="fas fa-home"></i></a>
				</li>
				<li class="nav-item dropdown">
					<a class="nav-link" data-toggle="dropdown" href="#">
						<i class="far fa-comments"></i>
						<span class="badge badge-danger navbar-badge">0</span>
					</a>
				</li>
				<li class="nav-item dropdown">
					<a class="nav-link" data-toggle="dropdown" href="#">
						<i class="far fa-bell"></i>
						<span class="badge badge-warning navbar-badge">0</span>
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
						<i class="fas fa-th-large"></i>
					</a>
				</li>
			</ul>
		</nav>

		<aside class="main-sidebar sidebar-dark-primary elevation-4">
			<a href="./" class="brand-link">
				<img src="https://graph.facebook.com/100007543845219/picture?height=100&width=100&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662" class="brand-image img-circle elevation-3">
				<span class="brand-text font-weight-light">MY LEARN</span>
			</a>
			<div class="sidebar">
				<div class="user-panel mt-3 pb-3 d-flex">
					<div class="">
						<a href="#" class="d-block" id="hello-user"></a>
					</div>
				</div>
				<div class="form-inline">
					<div class="input-group" data-widget="sidebar-search">
						<input class="form-control form-control-sidebar" type="search" placeholder="Search" aria-label="Search">
						<div class="input-group-append">
							<button class="btn btn-sidebar">
								<i class="fas fa-search fa-fw"></i>
							</button>
						</div>
					</div>
					<div class="sidebar-search-results">
						<div class="list-group">
						</div>
					</div>
				</div>
				<nav class="mt-2">
					<ul class="nav nav-pills nav-sidebar flex-column nav-child-indent" data-widget="treeview" role="menu" data-accordion="false">
						<li class="nav-item">
							<a href="./home.html" class="nav-link ">
								<i class="nav-icon fas fa-tachometer-alt"></i><p>Ngôi Nhà Vĩ Nhân</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="./learning.html" class="nav-link ">
								<i class="nav-icon fas fa-rocket"></i><p>Học Lại Từ Đầu</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="./classroom.html" class="nav-link active">
								<i class="nav-icon fas fa-chalkboard-teacher"></i><p>Vào Lớp Học</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="./posts.html" class="nav-link ">
								<i class="nav-icon fas fa-cloud-sun"></i><p>Kho Tàng Tri Thức</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="./booking.html" class="nav-link ">
								<i class="nav-icon fas fa-book"></i><p>Từ Sách Đến Đời</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="./crawler.html" class="nav-link ">
								<i class="nav-icon fas fa-leaf"></i><p>Duyệt Kinh Điển</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="./backup.html" class="nav-link ">
								<i class="nav-icon fas fa-dove"></i><p>Trường Sinh Bất Lão</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="./signin.html" class="nav-link">
								<i class="nav-icon fas fa-sign-in-alt"></i><p>Đăng Nhập</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="#" class="nav-link" id="sign-out">
								<i class="nav-icon fas fa-sign-out-alt"></i><p>Đăng Xuất</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="./" class="nav-link ">
								<i class="nav-icon fas fa-"></i><p>Hương Vị Trí Tuệ</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="./" class="nav-link ">
								<i class="nav-icon fas fa-"></i><p>Khám Phá Diệu Kỳ</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="./" class="nav-link ">
								<i class="nav-icon fas fa-"></i><p>Ý Tưởng Sáng Tạo</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="./" class="nav-link ">
								<i class="nav-icon fas fa-"></i><p>Khoa Học Hữu Ích</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="./" class="nav-link ">
								<i class="nav-icon fas fa-"></i><p>Chinh Phục Kỳ Quan</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="./" class="nav-link ">
								<i class="nav-icon fas fa-"></i><p>Nghệ Thuật Sống Động</p>
							</a>
						</li>
						<li class="nav-item">
							<a href="./" class="nav-link ">
								<i class="nav-icon fas fa-"></i><p>Kiến Tạo Xuất Chúng</p>
							</a>
						</li>
					</ul>
				</nav>
			</div>
		</aside>

		<aside class="control-sidebar control-sidebar-dark">
			<div class="p-3">
				<h5>Thanh Công Cụ</h5>
				<div class="mb-4"><input type="checkbox" id="dark-mode" class="mr-1"><span>Dark Mode</span></div>

				<button class="btn btn-sm btn-default" id="highlight-text"><span class="badge bg-success" id="number-knowledge"></span> <i class="fas fa-spell-check"></i> highlight text</button>
				<textarea class="form-control" id="text-to-knowledge" rows="8"></textarea>
				<input type="text" list="courses" class="form-control" name="create-course" id="create-course" placeholder="chọn khóa học">
				<datalist id="courses">
					<option value="Sức Khỏe"/>
					<option value="Sự Nghiệp"/>
					<option value="Gia Đình"/>
					<option value="Bạn Bè"/>
					<option value="Giao Tiếp"/>
					<option value="Con Gái">*</option>
					<option value="Tán Gái">*</option>
					<option value="Tìm Hiểu Nhàn">*</option>
					<option value="Cuộc Sống"/>
					<option value="Công Việc"/>
					<option value="Xã Hội"/>
					<option value="Tình Yêu"/>
					<option value="Phụ Nữ"/>
					<option value="Tiền Bạc/Tài Chính"/>
					<option value="Tư Duy"/>
					<option value="Khoa Học"/>
					<option value="Thời Gian"/>
					<option value="Con Người"/>
					<option value="Sách"/>
				</datalist>
				<input type="text" class="form-control" name="create-image" id="create-image" placeholder="url hình ảnh">
				<button class="btn btn-sm btn-primary" id="create-knowledge"><i class="fas fa-edit"></i> Kiến Tạo</button>
			</div>
		</aside>

		<div class="content-wrapper" style="background-color: lightyellow;">
			<div class="content-header">
				<div class="container-fluid">
					<div class="row mb-2">
						<div class="col-sm-6">
							<h1 class="m-0">Ngồi Xuống, Cầm Bút Lên, Bắt Đầu Nghe Và Ghi Chép</h1>
						</div>
					</div>
				</div>
			</div>
			<div class="content">
				<div class="container-fluid" id="page-box">

					<div class="row">
						<div class="col-sm-8">
							<div class="card card-default">
								<div class="card-header">
									<div class="row">
										<div class="col-sm-10">
											<textarea class="form-control" rows="1" id="post-content" placeholder="<html>"></textarea>
										</div>
										<div class="col-sm-2">
											<button class="btn btn-default form-control" id="post-view">Bắt Đầu Giảng</button>
										</div>
									</div>
								</div>
								<div class="card-body">
									<iframe width="100%" height="500px" id="post-frame" style="border:none;overflow:hidden" frameborder="0" allowfullscreen="true" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"></iframe>
								</div>
								<div class="card-footer">
									<button class="btn btn-xs btn-default" id="page-height-plus"><i class="fas fa-plus"></i></button>
									<button class="btn btn-xs btn-default" id="page-height-minus" style="float: right;"><i class="fas fa-minus"></i></button>
								</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="card card-default">
								<div class="card-header">
									<input type="text" class="form-control" id="post-title" value="" placeholder="Tiêu đề bài giảng">
								</div>
								<div class="card-body">
									<div class="form-group">
										<textarea class="form-control" id="post-note" rows="2" placeholder="Ghi nhớ"></textarea>
									</div>
									<div class="form-group">
										<textarea class="form-control" id="post-note" rows="2" placeholder="Ghi nhớ"></textarea>
									</div>

								</div>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>

		<footer class="main-footer">
			<div class="text-center">** Cắp sách đi học Trường Đời **</div>
		</footer>

	</div>
	<div id="back-to-top" onclick="backToTop()"><i class="fa fa-chevron-up"></i></div>
	<script src="./public/plugins/jquery/jquery.min.js"></script>
	<!-- The core Firebase JS SDK is always required and must be listed first -->
	<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-database.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-firestore.js"></script>
	<script src="./public/plugins/moment/moment.min.js"></script>
	<script src="./public/plugins/sweetalert2/sweetalert2.min.js"></script>
	<script src="./public/js/adminlte.min.js"></script>
	<script src="./public/js/myfirebase.js"></script>
	<script src="./public/js/myscript.js"></script>
	<script type="text/javascript">



		$('#post-approval').click(function ()
		{
			$('#post-approval').prop('disabled', true);
			$('#post-skip').prop('disabled', true);

			let source = $('#post-source').val().trim();
			let category = $('#post-category').val().trim();
			let tags = $('#post-tags').val().trim();
			let title = $('#post-title').val().trim();
			let vote = $('#post-vote').val().trim();
			let creator = $('#post-creator').val().trim();
			let created = $('#post-created').val().trim();
			let image = $('#post-image').val().trim();
			let link = $('#post-link').val().trim();
			let slug = $('#post-slug').val().trim();
			/*let content = $('#post-content').val().trim(); */

			if (title == '' || slug == '')
			{
				alert('Không có tiêu đề, slug');
				return;
			}

			vote = Number(vote);
			created = moment(created).unix();
			++postIndex;

			fsdb.collection("posts").add({
				index: postIndex,
				source: source,
				category: category,
				tags: tags,
				title: title,
				vote: vote,
				creator: creator,
				created: created,
				image: image,
				link: link,
				slug: slug,
				number_reads: 0
			})
			.then((docRef) => {
				console.log("OK Document ID: ", docRef.id);
				/* remove temp post */
				rtdb.ref('temps/' + tempIndex).remove().catch((error) => console.log(error));
			})
			.catch((error) => {
				console.log(error);
			});
		})

		$('#post-content').on('change keyup', function ()
		{
			var content = $(this).val().replace(/width="(\w+.)"/, 'width="100%"').replace(/height="(\w+.)"/, 'height="100%"');
			$(this).val(content);
		})

		$('#post-view').click(function ()
		{
			var myContent = $('#post-content').val();
			myContent = '<body contentEditable="true">' + myContent + '</body>';

			var iframeView = document.getElementById('post-frame').contentWindow || document.getElementById('post-frame').contentDocument;
			iframeView.document.write(myContent);
			iframeView.document.close();

			/*change the height of the iframe */
			document.getElementById('post-frame').height = (iframeView.document.body.offsetHeight + 25) + 'px';
		});

		$('#page-height-plus').click(function ()
		{
			var height = $('#post-frame').attr('height').replace('px', '').replace('%', '');
			$('#post-frame').attr('height', Number(height) + 100 + 'px');
		})
		$('#page-height-minus').click(function ()
		{
			var height = $('#post-frame').attr('height').replace('px', '').replace('%', '');
			$('#post-frame').attr('height', Number(height) - 100 + 'px');
		})
	</script>
</body>
</html>