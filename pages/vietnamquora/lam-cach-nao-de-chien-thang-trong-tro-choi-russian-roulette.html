<div>## **Làm cách nào để chiến thắng trong trò chơi Russian Roulette?**<br><br>#WedNonQuora<br><br>*Theo một bài báo trên Mathematics Magazine. Lưu ý: đây không phải bài dịch hoàn thiện từ bài báo đó.*<br><br>Original paper: **General Russian Roulette**, Gunnar Blom el at., 1996<br><br>[https://www.maa.org/sites/default/files/Gunnar_Blom,_Jan-Eric_Englund_and_Dennis_Sandell08606.pdf](https://www.maa.org/sites/default/files/Gunnar_Blom,_Jan-Eric_Englund_and_Dennis_Sandell08606.pdf)<br><br>----<br>## Trò chơi russian roulette<br><br>Russian roulette là trò chơi mà hai người sẽ dùng một khẩu súng lục 6 ổ đạn, trong đó chỉ có một ổ có chứa đạn. Ban đầu súng sẽ được lên đạn ngẫu nhiên. Người chơi đầu tiên sẽ tự chĩa súng vào đầu mình và bóp cò. Nếu như còn sống, anh ta sẽ đưa cho đối phương và người này cũng sẽ phải làm tương tự. Cứ luân phiên như vậy, trò chơi kết thúc khi viên đạn duy nhất phát nổ.<br>## **Tổng quát hoá bài toán**<br><br>Lấy cảm hứng từ trò chơi Russian roulette nêu trên, ta xét bài toán tổng quát sau đây.<br><br>Có n người chơi (n ≥ 2) A1, A2, …, An, mỗi người có một khẩu súng riêng giống nhau (6 ổ đạn, 1 ổ duy nhất có đạn). Trong mỗi lần thử, xác suất đạn phát nổ là p, xác suất không có đạn nổ là q = 1 – p, không phụ thuộc vào những lượt bắn của người khác.<br><br>Đầu tiên, A1 dùng súng của mình để tự bắn. Tiếp, A2 cũng tự bắn mình bằng súng của mình. Cứ lần lượt như vậy, người cuối cùng sống sót là người chiến thắng. Nghe dã man không?<br><br>Ta cần tính xác suất chiến thắng P(i, n) của người thứ i trong n người chơi.<br>## **Với n = 2**<br><br>Xét trường hợp chỉ có 2 người chơi. Ở lượt bắn bất kỳ, nếu súng của A1 nổ, anh ta sẽ chết và A2 thắng; ngược lại vai trò của A1 và A2 sẽ đổi chỗ cho nhau. Từ đó, ta có công thức sau đây:<br><br>P(1, 2) = p.0 + q.P(2, 2)<br><br>Lưu ý, P(1, 2) = 1 – P(1, 2)<br><br>Từ đó ta tính được P(1, 2) = q/(1+q), P(2, 2) 1/(1+q). Nếu p=1/6, thì xác suất chiến thắng của A1, A2 lần lượt là 5/11 và 6/11.<br>## **Lời giải đệ quy**<br><br>Với n bất kỳ, P(i, n) có thể được tính thông qua đệ quy: P(i, 2), P(i, 3)… và cứ như vậy.<br><br>***Với n = 3***<br><br>Có hai trường hợp như sau:<br><br>1. A1 nổ súng và chết. Còn lại A2 và A3, họ sẽ chơi giống như trường hợp 2 người chơi theo thứ tự A2 -> A3.<br><br>2. A1 sống sót. Họ sẽ chơi tiếp theo thứ tự A2 -> A3 -> A1.<br><br>Từ đó ta thu được những công thức sau:<br><br>P(1, 3) = p.0 + q.P(3, 3)<br><br>P(2, 3) = p.P(1, 2) + q.P(1, 3)<br><br>P(3, 3) = p.P(2, 2) + q.P(2, 3)<br><br>Trong đó P(1, 2) và P(2, 2) đã được tính phía trên, và P(1, 3) + P(2, 3) + P(3, 3) = 1.<br><br>Giải hệ phương trình trên ta được:<br><br>P(1, 3) = pq/(1+q) + q^3/(1+q+q^2)<br><br>P(2, 3) = q/(1+q+q^2)<br><br>P(3, 3) = p/(1+q) + q^2/(1+q+q^2)<br><br>***Với n = 4***<br><br>Tương tự, ta cũng xây dựng hệ công thức sau:<br><br>P(1, 4) = p.0 + q.P(4,   4)<br><br>P(2, 4) = p.P(1, 3)   + q.P(1, 4)<br><br>P(3, 4) = p.P(2, 3)   + q.P(2, 4)<br><br>P(4, 4) = p.P(3, 3)   + q.P(3, 4)<br><br>***Tổng quát***<br><br>Ta có được công thức đệ quy sau:<br><br>P(i, n) = p.P(i-1, n-1) + q.P(prev(i), n)<br><br>Quy ước:<br><br>· P(0, n) = 0<br><br>· prev(i) là chỉ số của người chơi liền trước người chới thứ i (ví dụ: prev(2) = 1, prev(1) = n, …)<br><br>Chẳng dại gì mà ta đi tính bằng tay lần lượt những bước như trên. Ta sẽ bỏ vào máy tính cho nó chạy. Code ở [đây](https://gist.github.com/bui-thanh-lam/439138339f28e090ef1507a9604a10ef) (Python). Kết quả thu được như sau (có thể có sai số do làm tròn):<br><br>P(1, 5) = 0.1828<br><br>P(2, 5) = 0.1904<br><br>P(3, 5) = 0.1989<br><br>P(4, 5) = 0.2084<br><br>P(5, 5) = 0.2194<br><br>…<br><br>Có thể thấy, người chơi đầu tiên là thiệt nhất, và tỉ lệ chiến thắng tăng dần cho các người chơi sau. Điều này đã được chứng minh trong bài báo gốc (họ đã xây dựng được công thức tổng quát thay vì đệ quy).<br><br>Một điểm đáng lưu ý nữa là với p nhỏ, tức q gần 1, các P(i, n) có giá trị xấp xỉ nhau với cùng n, và gần bằng 1/n.<br><br>Người ta cũng xây dựng được công thức xấp xỉ nếu rất rất nhiều người tham gia chơi Russian roulette. Nhưng tình huống này nghe vẻ hơi phi thực tế nhỉ?<br><br><img src='https://scontent.fhan17-1.fna.fbcdn.net/v/t1.6435-9/142221802_1765613933598550_1302022897343651807_n.jpg?_nc_cat=103&ccb=1-7&_nc_sid=ca434c&_nc_ohc=OCt9ApchCxkAX-Ncdjg&_nc_ht=scontent.fhan17-1.fna&edm=AFuVL-cEAAAA&oh=00_AfCsy6_dATChh8tR6OVj1PNEvl2KG2qKKSePMwRLNbg8TA&oe=63D0DA4F'></div>