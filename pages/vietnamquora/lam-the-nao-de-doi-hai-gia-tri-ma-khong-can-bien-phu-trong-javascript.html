<div># **Làm thế nào để đổi hai giá trị mà không cần biến phụ trong JavaScript?**<br><br>#medium #JavaScript #code #ES6<br><br>[Tác giả: Александр Майоров<br><br> Ngày xuất bản 18/06/2016<br><br> Link bài viết gốc: https://link.medium.com/A3lZ79skl4<br><br> Dịch: Bùi Thanh Lâm]<br><br>Thông thường, hoán đổi giá trị của hai biến cần 3 câu lệnh và 1 biến phụ. Bạn có ngạc nhiên không nếu tôi bảo rằng: trong JavaScript (JS), còn có cách đơn giản hơn như thế nhiều.<br><br>Có hai loại hoán đổi. Loại thứ nhất, tạm gọi là loại cổ điển, đó là khi chúng ta hoán đổi hai số cho nhau. Loại thứ hai phức tạp hơn: hoán đổi hai biến có kiểu dữ liệu bất kì (string, float, object, v.v…)<br><br>----<br># Phương pháp truyền thống<br><br>Mục tiêu: hoán đổi giá trị của 2 biến a và b (kiểu bất kỳ).<br>> let a = 1,<br>>     b = 2,<br>>     c = 0;<br>> c = a;<br>> a = b;<br>> b = c;<br><br>Hiển nhiên, chúng ta thấy xuất hiện một biến mới, tạm lưu giá trị của a trong quá trình hoán đổi. Vậy không cần thằng c này có được không? Được, được chứ!<br><br>----<br># Đối với số nguyên<br><br>Bắt đầu với thử thách đầu tiên: số nguyên<br>## Dùng toán tử toán học<br>> a = a + b<br>> b = a - b<br>> a = a - b<br><br>Hoặc viết gọn là:<br>> a += b<br>> b = a - b<br>> a -= b<br>## Dùng toán tử XOR<br><br>Bởi đây là các số nguyên, chúng ta có thể khéo léo dùng toán tử đảo bit là XOR trong trường hợp này:<br>> a = a ^ b<br>> b = a ^ b<br>> a = a ^ b<br><br>Hoặc viết gọn là:<br>> a ^= b<br>> b ^= a<br>> a ^= b<br><br>Đây còn được gọi là Thuật toán hoán đổi dùng XOR. Nguyên lý của nó được mô tả trong bài viết sau *(ND: [click*](http://en.wikipedia.org/wiki/XOR_swap_algorithm) *để xem – Wikipedia).*<br>## Vài mẹo hay ho khác<br><br>**Hoán đổi trong một dòng**<br>> a = b + (b=a, 0)<br><br>Phương án này không cần biến phụ, không dùng mảng, chỉ thêm thắt có một xíu vậy thôi, và nó chạy rất nhanh. Thực tế đôi khi nó còn nhanh hơn cách dùng biến phụ nếu chạy trên một vài nền tảng. Nó đúng với mọi loại số, không bao giờ tràn bộ nhớ, và cân luôn mấy trường hợp đặc biệt chẳng hạn Infinity hay NaN.<br><br>*(ND: Nếu hoán đổi hai biến kiểu string, chỉ cần thay đổi số 0 thành “”).*<br><br>Nó chạy cụ thể như sau:<br>1. (b=a, 0): gán giá trị ban đầu của a cho b, trả về số 0. *(ND: Bạn đọc nào chưa hiểu rõ cái này, xem thêm tài liệu tại [đây](https://www.tutorialspoint.com/What-is-Comma-Operator-in-JavaScript)).*<br>1. a = b + 0: gán giá trị b (ban đầu) + 0 cho a, tức gán a = b<br><br>**Cách hoán đổi khác, cũng một dòng**<br>> b=a+(a=b)-b<br><br>**Hoán đổi một dòng, dùng XOR**<br>> a = a^b^(b^=(a^b))<br><br>----<br># Lời giải dùng được với MỌI KIỂU DỮ LIỆU<br><br>Nhiệm vụ thứ hai khó nhai hơn: đổi giá trị 2 biến bất kỳ<br>## Phương pháp cổ điển trong một dòng lệnh<br><br>Mẹo này sử dụng mảng để hoán đổi biến. Đọc qua dòng lệnh và thử suy nghĩ chút nhé:<br>> a = [b, b=a][0];<br><br>Có vài điều đáng nói ở đây. Nếu bạn chưa hiểu câu lệnh này chạy thế nào, hãy đọc phần giải thích này:<br>1. Khởi tạo một mảng với phần tử đầu là b, phần tử số 2 là b<br>1. Gán phần tử số 2: b = a ngay khi mảng được khởi tạo<br>1. Gán giá trị của phần tử đầu trong mảng, tức giá trị của b ban đầu, cho a.<br><br>*(ND: Đoạn trên đây OP chắc chắn đã nhầm một chút, mình đã tự dịch theo ý của mình)*<br>## Phương pháp hoán đổi khác<br><br>**Với ES6, ta có thể dùng hàm rút gọn:**<br>> b = (a=>a)(a,a=b);<br><br>**Hoặc nếu trong ES5, câu lệnh này được viết là:**<br>> b = (function(a){ return a })(a,a=b);<br><br>*(ND: Hàm dạng này gọi là [self-executing function](https://blog.mgechev.com/2012/08/29/self-invoking-functions-in-javascript-or-immediately-invoked-function-expression/). Xem thêm tại [đây](https://stackoverflow.com/questions/592396/what-is-the-purpose-of-a-self-executing-function-in-javascript))*<br>## Phương pháp dùng cho ES6 trở lên<br><br>Kể từ ES6, bạn đã có thể hoán đổi hai biến một cách đẹp trai hơn. Chỉ đơn giản gán hai mảng như sau:<br>> [a, b] = [b, a]<br><br>*(ND: Đây là destructuring assignment, xem thêm tại [đây](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment))*<br><br><img src='https://scontent.fhan17-1.fna.fbcdn.net/v/t1.6435-9/87788808_1477732145720065_4698088528356048896_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=ca434c&_nc_ohc=pWIcpvvx6nwAX8Dv1mE&_nc_ht=scontent.fhan17-1.fna&edm=AFuVL-cEAAAA&oh=00_AfCyc79GW3IJaVHOQZP5ydw2gEiAsMszlghjfx70XaEL_Q&oe=63D0D21E'></div>