<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Chứng Minh Đi</title>
	<link rel="stylesheet" href="/public/plugins/fontawesome/css/all.min.css">
	<link rel="stylesheet" href="/public/plugins/sweetalert2/sweetalert2.min.css">
	<link rel="stylesheet" href="/public/css/adminlte.min.css">
	<link rel="stylesheet" href="/public/css/mystyle.css">
</head>

<body class="hold-transition sidebar-mini layout-navbar-fixed layout-fixed">

	<div class="wrapper">

		<nav class="main-header navbar navbar-expand border-bottom-0 text-sm navbar-light" id="header">
			<ul class="navbar-nav">
				<li class="nav-item">
					<a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
				</li>
				<li class="nav-item d-none d-sm-inline-block">
					<a href="/" class="nav-link"><i class="fas fa-home"></i></a>
				</li>
			</ul>
			<ul class="navbar-nav ml-auto">
				<li class="nav-item">
					<a href="/calendar.html" class="nav-link" id="my-clock"><i class="far fa-clock"></i></a>
				</li>
				<li class="nav-item dropdown">
					<a class="nav-link" data-toggle="dropdown" href="#">
						<i class="far fa-comments"></i>
						<span class="badge badge-danger navbar-badge">0</span>
					</a>
				</li>
				<li class="nav-item dropdown">
					<a class="nav-link" data-toggle="dropdown" href="#">
						<i class="far fa-bell"></i>
						<span class="badge badge-warning navbar-badge">0</span>
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
						<i class="fas fa-th-large"></i>
					</a>
				</li>
			</ul>
		</nav>

		<aside class="main-sidebar sidebar-dark-primary elevation-4">
			<a href="/" class="brand-link text-md">
				<img src="https://graph.facebook.com/100007543845219/picture?height=100&width=100&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662" class="brand-image img-circle elevation-3">
				<span class="brand-text font-weight-light" id="hello-user">MY LEARN</span>
			</a>
			<div class="sidebar">
				<div class="form-inline">
					<div class="input-group" data-widget="sidebar-search">
						<input class="form-control form-control-sidebar" type="search" placeholder="Search" aria-label="Search">
						<div class="input-group-append">
							<button class="btn btn-sidebar">
								<i class="fas fa-search fa-fw"></i>
							</button>
						</div>
					</div>
					<div class="sidebar-search-results">
						<div class="list-group">
						</div>
					</div>
				</div>
				<nav class="mt-2 text-sm">
					
				</nav>
			</div>
		</aside>

		<aside class="control-sidebar control-sidebar-dark">
			<div class="p-3">
				<h5>Thanh Công Cụ</h5>
				<div class="mb-4"><input type="checkbox" id="dark-mode" class="mr-1"><span>Dark Mode</span></div>
				
				<button class="btn btn-sm btn-default" id="fast-highlight"><span class="badge bg-success" id="fast-number"></span> <i class="fas fa-spell-check"></i> highlight</button>
				<textarea class="form-control" id="fast-content" rows="8"></textarea>
				<select class="form-control" id="fast-categories">
				</select>
				<select class="form-control" id="fast-courses">
				</select>
				<button class="btn btn-sm btn-primary" id="fast-knowledge"><i class="fas fa-edit"></i> Kiến Tạo</button>
			</div>
		</aside>

		<div class="content-wrapper">
			<div class="content-header">
				<div class="container-fluid">
					<div class="row mb-2">
						<div class="col-sm-6">
							<h1 class="m-0"></h1>
						</div>
					</div>
				</div>
			</div>
			<div class="content">
				<div class="container-fluid" id="page-box">
					<div class="row">
						<div class="col-sm-7">
							<div class="card card-default">
								<div class="card-header">
									<button class="btn btn-sm btn-success" id="learn-update">Chứng Minh Đi</button>
								</div>
								<div class="card-body">
									<div class="form-group">
										<label class="col-form-label" for="learn-learn"><i class="fas fa-fire"></i> Bài Học</label>
										<textarea class="form-control" rows="7" id="learn-learn"></textarea>
									</div>
									<div class="row">
										<div class="col-sm-3">
											<div class="form-group">
												<label><i class="fas fa-dice-d6"></i> Khóa Học</label>
												<input type="text" class="form-control" id="learn-course">
											</div>
										</div>
										<div class="col-sm-3">
											<div class="form-group">
												<label><i class="fas fa-recycle"></i> Lặp Lại</label>
												<input type="number" class="form-control" id="learn-repeat">
											</div>
										</div>
										<div class="col-sm-3">
											<div class="form-group">
												<label><i class="fas fa-paint-brush"></i> Khai Thiên</label>
												<input type="text" class="form-control" id="learn-created">
											</div>
										</div>
										<div class="col-sm-3">
											<div class="form-group">
												<label><i class="fas fa-mosque"></i> Lập Địa</label>
												<input type="text" class="form-control" id="learn-practice">
											</div>
										</div>
									</div>
									<div class="form-group">
										<label><i class="fas fa-camera-retro"></i> Minh Họa</label>
										<input type="text" class="form-control" id="learn-image">
									</div>

								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- footer -->

	</div>
	<div id="back-to-top" onclick="backToTop()"><i class="fa fa-chevron-up"></i></div>
	<script src="/public/plugins/jquery/jquery.min.js"></script>
	<!-- The core Firebase JS SDK is always required and must be listed first -->
	<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-database.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-firestore.js"></script>
	<script src="/public/plugins/moment/moment.min.js"></script>
	<script src="/public/plugins/sweetalert2/sweetalert2.min.js"></script>
	<script src="/public/js/adminlte.min.js"></script>
	<script src="/public/js/myfirebase.js"></script>
	<script src="/public/js/myscript.js"></script>
	<script type="text/javascript">
		var index = "";

		var url_string = window.location.href;
		var url = new URL(url_string);
		index = url.searchParams.get("docid");

		rtdb.ref('knowledge').child(index).get().then((snapshot) => {
			if (snapshot.exists())
			{
				var doc = snapshot.val();

				$('#learn-learn').val(doc.learn);
				$('#learn-course').val(doc.course);
				$('#learn-repeat').val(doc.repeat);
				$('#learn-image').val(doc.image);

				let created = moment.unix(doc.created_at).format("YYYY-MM-DD");
				$('#learn-created').val(created).prop('disabled', true);

				let practice = moment.unix(doc.practice_at).format("YYYY-MM-DD");
				$('#learn-practice').val(practice).prop('disabled', true);
			}
			else
			{
				Toast.fire({ icon: 'error', title: "No data available" });
			}
		}).catch((error) => {
			Toast.fire({ icon: 'error', title: error });
		});

		$('#learn-update').click(function ()
		{
			$(this).prop('disabled', true);

			let learn = $('#learn-learn').val().trim();
			let course = $('#learn-course').val().trim();
			let repeat = $('#learn-repeat').val().trim();
			let image = $('#learn-image').val().trim();

			repeat = Number(repeat);

			rtdb.ref('knowledge').child(index).update(
			{
				learn: learn,
				course: course,
				repeat: repeat,
				image: image
			})
			.then({

			})
			.catch((error) => {
				Toast.fire({ icon: 'error', title: error });
			});

		})

	</script>
</body>
</html>